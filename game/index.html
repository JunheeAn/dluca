<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Project LUA — Game Studio Slides</title>
<meta name="theme-color" content="#f7f9fb">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;600;800&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f7f9fb; --fg:#111; --muted:#2a2a2a; --subtle:#666;
    --line:rgba(17,17,17,.16);
    --maxw:1040px; --pad:28px;
    --arrowBase:0.18; --arrowHover:0.85;
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;background:var(--bg);color:var(--fg);
    font-family:'Inter','Noto Sans KR',system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic,sans-serif;
    line-height:1.65
  }
  a{color:inherit;text-decoration:none}
  a:hover{text-decoration:underline}

  /* Header */
  .header{position:sticky;top:0;z-index:50;background:rgba(247,249,251,.86);
    backdrop-filter:saturate(1.05) blur(6px);border-bottom:1px solid var(--line)}
  .header-inner{max-width:var(--maxw);margin:0 auto;padding:10px var(--pad);
    display:flex;align-items:center;gap:12px;justify-content:space-between}
  .brand{font-weight:800;font-size:.95rem}
  .top-menu{display:flex;gap:16px;align-items:center}
  .top-menu a{font-size:.86rem;color:var(--subtle)}
  .top-menu a:hover{color:var(--fg)}

  /* Stage / Slider */
  .stage{max-width:var(--maxw);margin:0 auto;padding:0 var(--pad);position:relative}
  .frame{
    overflow:hidden;border:1px solid var(--line);border-radius:14px;background:#fff;
    transition:height .35s ease; /* 슬라이드별 높이 변화 부드럽게 */
  }
  .track{display:flex;transition:transform .45s ease}
  .slide{
    position:relative;min-width:100%;
    padding:72px 32px 60px; /* 상단 라벨 공간 확보(고정), 하단은 내용에 따라 */
    display:grid;gap:18px;align-items:start;
  }
  .s-one{grid-template-columns:1fr}
  .s-two{grid-template-columns:1.1fr .9fr;gap:28px}

  /* Slide label (좌상단 작은 텍스트) */
  .sl-label{
    position:absolute;top:14px;left:16px;
    font-size:.78rem;color:var(--subtle);letter-spacing:.02em;
  }

  .h1{font-weight:800;font-size:28px;margin:0}
  .h2{font-weight:700;font-size:20px;margin:0}
  .body{color:var(--muted)}
  .rule{border:0;border-top:1px solid var(--line);margin:8px 0 12px}

  /* Media & Caption */
  .media{width:100%;border:1px solid var(--line);border-radius:10px;overflow:hidden;background:#fcfdff}
  .media img{width:100%;height:auto;display:block}
  .cap{font-size:.85rem;color:var(--subtle);padding:6px 10px;border-top:1px solid var(--line);background:#fff}

  /* Diagram (폰트 키움) */
  .diagram{border:1px dashed var(--line);border-radius:10px;padding:12px;background:#fcfdff}
  .diagram svg{width:100%;height:auto;display:block}

  /* Arrows (옅게) */
  .nav{position:absolute;inset:0;pointer-events:none;
    display:flex;align-items:center;justify-content:space-between;padding:0 4px}
  .arrow{
    pointer-events:auto;cursor:pointer;user-select:none;
    width:44px;height:44px;border-radius:999px;border:1px solid var(--line);
    background:rgba(17,17,17,var(--arrowBase));color:#fff;
    display:flex;align-items:center;justify-content:center;
    transition:opacity .2s,transform .15s,background .2s;opacity:1;
  }
  .arrow:hover,.arrow:focus{background:rgba(17,17,17,var(--arrowHover));outline:none}
  .arrow:active{transform:scale(.98)}
  .arrow svg{width:18px;height:18px;fill:#fff}
  .arrow.hidden{visibility:hidden}

  /* Counter */
  .counter{position:absolute;left:0;right:0;bottom:10px;text-align:center;font-size:.78rem;color:var(--subtle);pointer-events:none}

  /* Footer */
  .footer{max-width:var(--maxw);margin:16px auto 32px;padding:0 var(--pad);color:var(--subtle);font-size:.9rem}

  /* Roadmap compact */
  .list-compact{list-style:none;padding-left:0;margin:6px 0 0}
  .list-compact li{margin:4px 0}
  .small{font-size:.95rem}
  .tiny{font-size:.88rem}

  /* Responsive */
  @media (max-width:960px){
    .s-two{grid-template-columns:1fr}
  }
  @media (max-width:640px){
    .slide{padding:72px 18px 56px}
    .arrow{width:40px;height:40px}
  }
</style>
</head>
<body>

<header class="header">
  <div class="header-inner">
    <a class="brand" href="../" title="Back to Main">DLUCA</a>
    <nav class="top-menu">
      <a href="executive-summary.pdf" target="_blank" rel="noopener">Executive Summary (PDF)</a>
      <a href="https://junheean.github.io/junhee/" target="_blank" rel="noopener">About me</a>
    </nav>
  </div>
</header>

<main class="stage" aria-label="Slide deck">
  <div class="frame" id="frame" tabindex="-1">
    <div class="track" id="track">

      <!-- s1 Cover -->
      <section class="slide s-one" data-slide="1" aria-label="Cover">
        <div class="sl-label">High-Concept</div>
        <div>
          <h1 class="h1">Project LUA — Visible-Conversation NPC Runtime<br>
            <span style="font-weight:600;font-size:16px;color:#333">가시적 대화 NPC 런타임</span></h1>
          <figure class="media" style="margin-top:12px">
            <img src="../hero.jpg" alt="Project LUA hero">
          </figure>
          <p class="body" style="text-align:center;margin-top:10px"><em>From answers to encounters</em></p>
        </div>
      </section>

      <!-- s2 Why me -->
      <section class="slide s-two" data-slide="2" aria-label="Why me">
        <div class="sl-label">Why me</div>
        <div>
          <h2 class="h2">Why me — 나의 배경</h2>
          <hr class="rule">
          <ul class="body">
            <li><b>2023</b> — AI NPC <b>창발적 서사</b> 연구(논문) <a href="paper.pdf" target="_blank" rel="noopener">[paper]</a></li>
            <li><b>2023</b> — <a href="DreamCanvas.pdf" target="_blank" rel="noopener"><b>DreamCanvas</b> (DLUCA 전신)</a></li>
            <li><b>2024–25</b> — 기술 장벽 돌파 → <b>LUA 프로토타입</b> 완성</li>
            <li><b>2025</b> — EdTech 전시(실시간 <b>AI Tutor LUA</b>)</li>
          </ul>
          <p class="body" style="margin-top:6px">1인으로 <b>연구·기획·구현·전시</b>까지 완주했고, <b>현장 반응</b>까지 확인했습니다.</p>
        </div>
        <figure class="media">
          <img src="s2-aitutor.jpg" alt="AI Tutor LUA">
          <figcaption class="cap">AI Tutor LUA</figcaption>
        </figure>
      </section>

      <!-- s3 Problem -->
      <section class="slide s-two" data-slide="3" aria-label="Problem">
        <div class="sl-label">Problem</div>
        <div>
          <h2 class="h2">Presence Gap / Uncanny Fatigue / Lore Drift(설정 일탈)</h2>
          <hr class="rule">
          <ul class="body">
            <li><b>Presence Gap</b> — 텍스트/음성만으론 <b>대면감·신뢰</b> 축적이 어렵다.</li>
            <li><b>Uncanny Fatigue</b> — 어긋난 <b>표정·타이밍</b>이 피로/거부감 유발.</li>
            <li><b>Lore Drift</b> — 즉석 응답이 <b>세계관·설정</b> 일관성에서 이탈.</li>
          </ul>
          <p><b>→ 해결:</b> <em>Visible Conversation</em> + 일관된 <b>오케스트레이션</b>.</p>
        </div>
        <figure class="media">
          <img src="s3-problem.jpg" alt="(optional) Problem illustration">
          <figcaption class="cap">Optional illustration</figcaption>
        </figure>
      </section>

      <!-- s4 Vision / Core Experience -->
      <section class="slide s-two" data-slide="4" aria-label="Vision">
        <div class="sl-label">Vision</div>
        <div>
          <h2 class="h2">대면 가능한 NPC — Core Experience</h2>
          <hr class="rule">
          <p class="body">시선·표정·타이밍이 <b>말과 동시에</b> 움직인다. 플레이어는 “대답을 듣는다”를 넘어, <b>만난다</b>를 경험한다.</p>
        </div>
        <figure class="media">
          <img src="s4-vision.jpg" alt="AI interviewer concept">
          <figcaption class="cap">AI 면접관 concept</figcaption>
        </figure>
      </section>

      <!-- s5 Core Loop (텍스트 먼저, 다이어그램 아래) -->
      <section class="slide s-two" data-slide="5" aria-label="Core Loop">
        <div class="sl-label">Core Loop</div>
        <div>
          <h2 class="h2">Listen → Think → Speak → React → Idle<br>
            <span style="font-weight:600;font-size:16px;color:#333">듣기 → 생각 → 말하기 → 반응 → 대기</span></h2>
          <hr class="rule">
          <p class="body">침묵 구간에는 <b>Back-channel</b>을 활용해 불쾌부조화를 최소화합니다.</p>
        </div>
        <div class="diagram" aria-label="Core loop diagram">
          <svg viewBox="0 0 820 340">
            <defs>
              <style>
                .t{font:600 14px Inter,'Noto Sans KR',sans-serif;fill:#111}
                .s{font:400 13px Inter,'Noto Sans KR',sans-serif;fill:#333}
                .b{fill:#fff;stroke:#cfd6e4;stroke-width:1.6}
                .a{marker-end:url(#arr)}
              </style>
              <marker id="arr" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
                <polygon points="0,0 10,4 0,8" fill="#333"/>
              </marker>
            </defs>
            <rect class="b" x="20"  y="130" rx="10" ry="10" width="140" height="72"/><text class="t" x="90"  y="164" text-anchor="middle">Listen (STT)</text>
            <rect class="b" x="180" y="130" rx="10" ry="10" width="140" height="72"/><text class="t" x="250" y="164" text-anchor="middle">Think (LLM)</text>
            <rect class="b" x="340" y="130" rx="10" ry="10" width="140" height="72"/><text class="t" x="410" y="164" text-anchor="middle">Speak (TTS)</text>
            <rect class="b" x="500" y="130" rx="10" ry="10" width="140" height="72"/>
            <text class="t" x="570" y="154" text-anchor="middle">React</text>
            <text class="s" x="570" y="176" text-anchor="middle">Lip / Emotion / Gaze</text>
            <rect class="b" x="660" y="130" rx="10" ry="10" width="140" height="72"/><text class="t" x="730" y="164" text-anchor="middle">Idle</text>
            <line class="a" x1="160" y1="166" x2="180" y2="166" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="320" y1="166" x2="340" y2="166" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="480" y1="166" x2="500" y2="166" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="640" y1="166" x2="660" y2="166" stroke="#333" stroke-width="1.6"/>
            <path class="a" d="M 660 210 C 560 300, 230 300, 160 210" fill="none" stroke="#333" stroke-width="1.6"/>
            <text class="s" x="410" y="320" text-anchor="middle">Back-channel barks로 침묵 구간 이질감 완화</text>
          </svg>
        </div>
      </section>

      <!-- s6 Runtime Director (텍스트 먼저, 다이어그램 아래) -->
      <section class="slide s-two" data-slide="6" aria-label="Runtime Director">
        <div class="sl-label">Runtime Director</div>
        <div>
          <h2 class="h2">State Machine & Latency Budget<br><span style="font-weight:600;font-size:16px;color:#333">상태기계 & 지연 버짓</span></h2>
          <hr class="rule">
          <ul class="body">
            <li>States: <b>Idle ↔ Listening ↔ Thinking ↔ Speaking ↔ Reacting</b></li>
            <li><b>Back-channel</b>로 침묵 구간 연결성 확보</li>
          </ul>
        </div>
        <div class="diagram" aria-label="STT & Gaze Sync pipeline">
          <svg viewBox="0 0 860 380">
            <defs>
              <style>
                .t{font:600 14px Inter,'Noto Sans KR',sans-serif;fill:#111}
                .s{font:400 13px Inter,'Noto Sans KR',sans-serif;fill:#333}
                .b{fill:#fff;stroke:#cfd6e4;stroke-width:1.6}
                .a{marker-end:url(#arr)}
              </style>
              <marker id="arr" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
                <polygon points="0,0 10,4 0,8" fill="#333"/>
              </marker>
            </defs>
            <rect class="b" x="20"  y="30"  rx="10" ry="10" width="170" height="66"/><text class="t" x="105" y="63" text-anchor="middle">Mic → STT</text>
            <text class="s" x="105" y="82" text-anchor="middle">Listening / Silence timeout</text>
            <rect class="b" x="20"  y="124" rx="10" ry="10" width="170" height="66"/><text class="t" x="105" y="158" text-anchor="middle">Text Input</text>
            <rect class="b" x="20"  y="218" rx="10" ry="10" width="170" height="66"/><text class="t" x="105" y="250" text-anchor="middle">Camera → Gaze</text>
            <text class="s" x="105" y="270" text-anchor="middle">u,v → Eye/Head bones</text>
            <rect class="b" x="220" y="96" rx="10" ry="10" width="180" height="74"/><text class="t" x="310" y="131" text-anchor="middle">LLM (stream)</text>
            <rect class="b" x="420" y="96" rx="10" ry="10" width="210" height="128"/><text class="t" x="525" y="122" text-anchor="middle">Orchestration</text>
            <text class="s" x="525" y="142" text-anchor="middle">OnFinal / Chunk-Coalesce Gate</text>
            <text class="s" x="525" y="160" text-anchor="middle">Latency Budget / UI Reveal</text>
            <rect class="b" x="650" y="30"  rx="10" ry="10" width="190" height="66"/><text class="t" x="745" y="65" text-anchor="middle">TTS</text>
            <rect class="b" x="650" y="124" rx="10" ry="10" width="190" height="66"/><text class="t" x="745" y="158" text-anchor="middle">OVRLipSync</text>
            <rect class="b" x="650" y="218" rx="10" ry="10" width="190" height="66"/><text class="t" x="745" y="252" text-anchor="middle">AnimBP (ARKit)</text>
            <line class="a" x1="190" y1="63"  x2="220" y2="133" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="190" y1="157" x2="220" y2="133" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="190" y1="251" x2="420" y2="160" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="400" y1="133" x2="420" y2="133" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="630" y1="133" x2="650" y2="63"  stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="630" y1="158" x2="650" y2="158" stroke="#333" stroke-width="1.6"/>
            <line class="a" x1="630" y1="183" x2="650" y2="251" stroke="#333" stroke-width="1.6"/>
          </svg>
        </div>
      </section>

      <!-- s7 Orchestration (텍스트 먼저, 다이어그램 아래) -->
      <section class="slide s-two" data-slide="7" aria-label="Orchestration">
        <div class="sl-label">Orchestration</div>
        <div>
          <h2 class="h2">OnFinal / Coalesce Gate, Viseme & Emotion Smoothing<br>
            <span style="font-weight:600;font-size:16px;color:#333">합성 트리거·스무딩으로 ‘툭툭’ 끊김 최소화</span></h2>
          <hr class="rule">
          <p class="body">버퍼/딜레이 값은 <b>프리셋</b>·<b>상황</b>에 따라 조정합니다.</p>
        </div>
        <div class="diagram" aria-label="Orchestration timeline with time axis">
          <svg viewBox="0 0 860 300">
            <defs>
              <style>
                .t{font:600 14px Inter,'Noto Sans KR',sans-serif;fill:#111}
                .s{font:400 13px Inter,'Noto Sans KR',sans-serif;fill:#333}
                .bar{fill:#eef1f6;stroke:#cfd6e4;stroke-width:1.6}
                .gate{fill:#fff4cc;stroke:#e2c35c;stroke-width:1.4}
                .axis{stroke:#bbb;stroke-width:1}
              </style>
            </defs>
            <line class="axis" x1="120" y1="30" x2="780" y2="30"/>
            <text class="s" x="120" y="22">0.0s</text>
            <text class="s" x="220" y="22">0.5s</text>
            <text class="s" x="320" y="22">1.0s</text>
            <text class="s" x="420" y="22">1.5s</text>
            <text class="s" x="520" y="22">2.0s</text>
            <text class="s" x="620" y="22">2.5s</text>
            <text class="s" x="720" y="22">3.0s</text>

            <text class="t" x="20" y="70">LLM Stream</text>
            <rect class="bar" x="120" y="56" width="640" height="20"/>
            <rect class="gate" x="210" y="54" width="6" height="24"/><text class="s" x="205" y="96">Coalesce ~0.25s(예)</text>
            <rect class="gate" x="300" y="54" width="6" height="24"/><text class="s" x="290" y="116">OnFinal</text>

            <text class="t" x="20" y="156">TTS</text>
            <rect class="bar" x="210" y="142" width="240" height="20"/>
            <text class="t" x="20" y="198">Lip-sync (Viseme)</text>
            <rect class="bar" x="220" y="184" width="240" height="20"/>
            <text class="t" x="20" y="240">Emotion</text>
            <rect class="bar" x="230" y="226" width="240" height="20"/>
            <text class="s" x="480" y="242">Emotion Delay ~0.5s(예)</text>
          </svg>
        </div>
      </section>

      <!-- s8 Tech Proof (Main UI) -->
      <section class="slide s-two" data-slide="8" aria-label="Tech Proof">
        <div class="sl-label">Tech Proof</div>
        <div>
          <h2 class="h2">현재 동작 — LLM/TTS/Lip/Emotion/Subtitle<br>
            <span style="font-weight:600;font-size:16px;color:#333">실시간 동기·오케스트레이션</span></h2>
          <hr class="rule">
          <ul class="body">
            <li>Local LLM 스트림, OVRLipSync, ARKit 커브, Micro-Idle, Subtitle Sync</li>
            <li>모듈형 어댑터 / Persona·Scenario Profiles로 톤·금칙·지식 경계 관리</li>
          </ul>
        </div>
        <figure class="media">
          <img src="s8-ui.jpg" alt="Main UI">
          <figcaption class="cap">Main UI</figcaption>
        </figure>
      </section>

      <!-- s9 Integration & Extensions (문장 추가) -->
      <section class="slide s-two" data-slide="9" aria-label="Integration">
        <div class="sl-label">Integration & Extensions</div>
        <div>
          <h2 class="h2">엔진 통합 & 확장<br>
            <span style="font-weight:600;font-size:16px;color:#333">LLMClientComponent / Emergent Dialogue / Plugin</span></h2>
          <hr class="rule">
          <ul class="body">
            <li><b>LLMClientComponent</b>로 <b>NPC 확장</b> 용이 — 다수 NPC에 동일 런타임 적용</li>
            <li><b>AI-NPC ↔ AI-NPC 대화</b> 기반 <b>창발적 서사</b> 확장 가능</li>
            <li><b>어댑터 & 프롬프트 프로필 분리</b>로 <b>말투·지식·배경</b> 교체가 손쉽고 안전</li>
            <li><b>UE5 Plugin</b> 구성으로 프로젝트 간 <b>재사용</b>·다른 콘텐츠에 <b>신속 적용</b></li>
          </ul>
        </div>
        <figure class="media">
          <img src="s9-arch.jpg" alt="Components">
          <figcaption class="cap">Components</figcaption>
        </figure>
      </section>

      <!-- s10 Mini-Project: The Conversation -->
      <section class="slide s-two" data-slide="10" aria-label="Mini project">
        <div class="sl-label">Mini-Project</div>
        <div>
          <h2 class="h2">“The Conversation” — 내러티브 실험<br>
            <span style="font-weight:600;font-size:16px;color:#333">대화만으로 진행·긴장감/몰입 극대화</span></h2>
          <hr class="rule">
          <p class="body">LLM NPC의 장점을 극대화한 짧은 내러티브. 플레이어의 발화와 감정에 반응하며 <b>대화만으로</b> 이야기가 전개됩니다.</p>
          <p class="body">콘셉트/무드 자료: <a href="the-conversation.pdf" target="_blank" rel="noopener">Concept Brief (PDF)</a>, <a href="tc-mood.jpg" target="_blank" rel="noopener">Mood Board</a></p>
        </div>
        <figure class="media">
          <img src="s10-tc.jpg" alt="The Conversation key art">
          <figcaption class="cap">The Conversation</figcaption>
        </figure>
      </section>

      <!-- s11 Roadmap (compact & 요약) -->
      <section class="slide s-one" data-slide="11" aria-label="Roadmap">
        <div class="sl-label">Roadmap</div>
        <div>
          <h2 class="h2">Roadmap — 11월 / 12월 / 1월</h2>
          <hr class="rule">
          <div class="body small" style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px">
            <div>
              <b>11월 — 시스템 품질</b>
              <ul class="list-compact tiny">
                <li>STT 입력(청취·타임아웃·전환)</li>
                <li>Gaze Sync 1차(u,v→Eye/Head + 스무딩)</li>
                <li>UI 상태(Listening/Thinking/Speaking), 백채널 패턴</li>
                <li>레이턴시/페이싱 버짓, 청크 결합</li>
                <li>Lip 튐 완화(attack/release·LPF·easing)</li>
                <li>Emotion 전이 규칙 정립</li>
              </ul>
            </div>
            <div>
              <b>12월 — 패키징·평가</b>
              <ul class="list-compact tiny">
                <li>런처·프리셋 번들(데모/전시, 로깅)</li>
                <li>파일럿 지표: 존재감·불쾌부조화·이해도</li>
                <li>Creative Award 등 출품 자료</li>
              </ul>
            </div>
            <div>
              <b>1월 — PoC·운용</b>
              <ul class="list-compact tiny">
                <li>PoC 가이드(HW/카메라/네트워크/조도)</li>
                <li>운영: 오프라인 폴백, 정책/시나리오 롤백</li>
                <li>로그/리플레이 절차</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- s12 Contacts -->
      <section class="slide s-one" data-slide="12" aria-label="Contacts">
        <div class="sl-label">Contacts</div>
        <div style="text-align:center">
          <h2 class="h2">안준희 · An Junhee</h2>
          <p class="body" style="margin:6px 0 10px">SNU Visual Communication Design (2024.02)</p>
          <div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center">
            <a class="card" href="../" rel="noopener" style="text-decoration:none"><b>Back to Main</b><span class="body">메인 페이지</span></a>
            <a class="card" href="https://junheean.github.io/junhee/" target="_blank" rel="noopener" style="text-decoration:none"><b>About me</b><span class="body">junheean.github.io/junhee/</span></a>
            <a class="card" href="executive-summary.pdf" target="_blank" rel="noopener" style="text-decoration:none"><b>Executive Summary</b><span class="body">PDF</span></a>
            <a class="card" href="mailto:dluca.ailab@gmail.com" style="text-decoration:none"><b>Email</b><span class="body">dluca.ailab@gmail.com</span></a>
            <a class="card" href="https://www.instagram.com/d.luca0/" target="_blank" rel="noopener" style="text-decoration:none"><b>Instagram</b><span class="body">@d.luca0</span></a>
          </div>
        </div>
      </section>

    </div>

    <!-- Arrows (처음/끝 슬라이드에서 자동 숨김) -->
    <div class="nav" aria-hidden="false">
      <button class="arrow" id="prev" aria-label="이전 슬라이드">
        <svg viewBox="0 0 24 24"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
      </button>
      <button class="arrow" id="next" aria-label="다음 슬라이드">
        <svg viewBox="0 0 24 24"><path d="M8.59 16.59 10 18l6-6-6-6-1.41 1.41L13.17 12z"/></svg>
      </button>
    </div>

    <!-- Slide counter -->
    <div class="counter" id="counter" aria-live="polite">1 / 12</div>
  </div>
</main>

<footer class="footer">© D-LUCA / Project LUA</footer>

<script>
(function(){
  const frame   = document.getElementById('frame');
  const track   = document.getElementById('track');
  const counter = document.getElementById('counter');
  const prev    = document.getElementById('prev');
  const next    = document.getElementById('next');
  const slides  = Array.from(track.children);
  const total   = slides.length;
  let idx = 0;

  function setFrameHeight(){
    // 현재 슬라이드 높이에 맞게 프레임 높이 조정
    const h = slides[idx].offsetHeight;
    frame.style.height = h + 'px';
  }

  function updateArrows(){
    prev.classList.toggle('hidden', idx===0);
    next.classList.toggle('hidden', idx===total-1);
  }

  function go(i, pushHash=true){
    idx = Math.max(0, Math.min(total-1, i));
    track.style.transform = `translateX(${-idx*100}%)`;
    counter.textContent = (idx+1)+' / '+total;
    if(pushHash){ location.hash = '#s'+(idx+1); }
    slides[idx].setAttribute('tabindex','0'); slides[idx].focus({preventScroll:true});
    slides.forEach((s,si)=>{ if(si!==idx) s.removeAttribute('tabindex'); });
    updateArrows();
    setFrameHeight();
  }

  function initFromHash(){
    const m = location.hash.match(/^#s(\d{1,2})$/i);
    if(m){
      const n = parseInt(m[1],10);
      if(n>=1 && n<=total){ go(n-1,false); return; }
    }
    go(0,false);
  }

  prev.addEventListener('click', ()=>go(idx-1));
  next.addEventListener('click', ()=>go(idx+1));
  document.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowLeft') go(idx-1);
    else if(e.key==='ArrowRight') go(idx+1);
  });
  window.addEventListener('hashchange', initFromHash);
  window.addEventListener('resize', setFrameHeight);
  window.addEventListener('load', setFrameHeight);

  // 이미지 로드 후 높이 재계산(현재 슬라이드일 때만)
  document.querySelectorAll('img').forEach(img=>{
    img.addEventListener('load', ()=> setFrameHeight(), {once:false});
  });

  initFromHash();
  // 초기 높이 설정
  setTimeout(setFrameHeight, 0);
})();
</script>
</body>
</html>
